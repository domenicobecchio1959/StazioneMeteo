<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meteo Live</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f2f2f2;
    margin: 0;
    padding: 20px;
    text-align: center;
  }

  /* Header */
  .header {
    font-size: 32px;
    font-weight: bold;
    margin-bottom: 5px;
  }
  .subheader {
    font-size: 20px;
    color: #444;
    margin-bottom: 25px;
  }

  /* Temperature block */
  .temp-block {
    background: white;
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
  }
  .temp-value {
    font-size: 60px;
    font-weight: bold;
  }
  .temp-minmax {
    font-size: 22px;
    color: #555;
    margin-top: 5px;
  }

  /* Generic blocks */
  .card {
    background: white;
    padding: 18px;
    border-radius: 12px;
    margin-bottom: 18px;
  }
  .label {
    font-size: 22px;
    color: #666;
  }
  .value {
    font-size: 40px;
    font-weight: bold;
    margin-top: 5px;
  }
  .small {
    font-size: 20px;
    color: #444;
  }
</style>
</head>

<body>

<div class="header">Sant'Ambrogio di Torino</div>
<div class="subheader">Quota 363 m s.l.m.</div>

<!-- TEMPERATURA -->
<div class="temp-block">
  <div class="label">Temperatura</div>
  <div id="temp" class="temp-value">-- °C</div>
  <div class="temp-minmax">
    Min: <span id="tmin">-- °C</span> — Max: <span id="tmax">-- °C</span>
  </div>
</div>

<!-- UMIDITÀ -->
<div class="card">
  <div class="label">Umidità</div>
  <div id="hum" class="value">-- %</div>
</div>

<!-- PRESSIONE -->
<div class="card">
  <div class="label">Pressione</div>
  <div id="press" class="value">-- hPa</div>
</div>

<!-- VENTO -->
<div class="card">
  <div class="label">Vento</div>
  <div id="wind" class="value">-- Km/h</div>
  <div id="dir" class="small">--°</div>
  <div id="dirtext" class="small">--</div>
</div>

<!-- BEAUFORT -->
<div class="card">
  <div class="label">Beaufort</div>
  <div id="beau" class="value">--</div>
</div>

<!-- ORA -->
<div class="small" style="margin-top: 20px;">Ultimo aggiornamento:</div>
<div id="time" class="small">--</div>

<script>
/* --- TUO JAVASCRIPT ORIGINALE, IDENTICO --- */

const channelID = "3214007";
const readAPI = "VCGZD38ITPCWT974";

const WIND_DIR_TEXT = [
  "N - Tramontana","NNE - Grecale","NE - Grecale","ENE - Grecale","E - Levante",
  "ESE - Scirocco","SE - Scirocco","SSE - Scirocco","S - Ostro","SSW - Libeccio",
  "SW - Libeccio","WSW - Libeccio","W - Ponente","WNW - Maestrale",
  "NW - Maestrale","NNW - Tramontana"
];

const BEAUFORT_TEXT = [
  "Calmo", "Bava di vento", "Brezza leggera", "Brezza moderata",
  "Brezza tesa", "Vento fresco", "Vento forte", "Burrasca",
  "Burrasca forte", "Forti tempeste", "Tempesta violenta", "Uragano"
];

function getWindDirectionIndex(gradi) {
  if (gradi >= 348 || gradi < 11) return 0;
  else if (gradi < 33) return 1;
  else if (gradi < 56) return 2;
  else if (gradi < 78) return 3;
  else if (gradi < 101) return 4;
  else if (gradi < 123) return 5;
  else if (gradi < 146) return 6;
  else if (gradi < 168) return 7;
  else if (gradi < 191) return 8;
  else if (gradi < 213) return 9;
  else if (gradi < 236) return 10;
  else if (gradi < 258) return 11;
  else if (gradi < 281) return 12;
  else if (gradi < 303) return 13;
  else if (gradi < 326) return 14;
  else return 15;
}

function aggiornaDati() {
  fetch(`https://api.thingspeak.com/channels/${channelID}/feeds.json?api_key=${readAPI}&results=1`)
    .then(r => r.json())
    .then(data => {
      const f = data.feeds[0];

      document.getElementById("temp").innerText = f.field1 + " °C";
      document.getElementById("hum").innerText = f.field2 + " %";
      document.getElementById("press").innerText = f.field3 + " hPa";
      document.getElementById("wind").innerText = f.field4 + " Km/h";

      const dir = parseInt(f.field5);
      document.getElementById("dir").innerText = dir + "°";
      document.getElementById("dirtext").innerText = WIND_DIR_TEXT[getWindDirectionIndex(dir)];

      const beau = parseInt(f.field6);
      document.getElementById("beau").innerText = BEAUFORT_TEXT[beau] || "--";

      const utc = new Date(f.created_at);
      document.getElementById("time").innerText = utc.toLocaleTimeString("it-IT");

      /* Min/Max temperatura (se hai field dedicati) */
      if (f.field7) document.getElementById("tmin").innerText = f.field7 + " °C";
      if (f.field8) document.getElementById("tmax").innerText = f.field8 + " °C";
    });
}

aggiornaDati();
setInterval(aggiornaDati, 15000);
</script>

</body>
</html>


















